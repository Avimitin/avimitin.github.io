<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>Solving Digital Roots</title>
  
  <link rel="canonical" href="https://blog.cf.avmtn.net/coding/golang/DigitalRoot/">
  
  <meta name="description" content="Sum of Digits / Digital RootDetailDigital root is the recursive sum of all the digits in a number. Given n, take the sum of the digits of n.  If that ">
  
  
  <meta name="keywords" content="golang,linux">
  
  <meta name="author" content="Avimitin">
  
  <meta property="og:image" content="https://blog.cf.avmtn.nethttps://cdn.jsdelivr.net/gh/Avimitin/PicStorage/pic/20200810211539.png">
  
  <meta property="og:site_name" content="Avimitin Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Solving Digital Roots" />
  
  <meta property="og:description" content="Sum of Digits / Digital RootDetailDigital root is the recursive sum of all the digits in a number. Given n, take the sum of the digits of n.  If that ">
  
  <meta property="og:url" content="https://blog.cf.avmtn.net/coding/golang/DigitalRoot/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Solving Digital Roots">
  
  <meta name="twitter:description" content="Sum of Digits / Digital RootDetailDigital root is the recursive sum of all the digits in a number. Given n, take the sum of the digits of n.  If that ">
  
  
  <meta name="twitter:image" content="https://blog.cf.avmtn.nethttps://cdn.jsdelivr.net/gh/Avimitin/PicStorage/pic/20200810211539.png">
  
  <meta name="twitter:url" content="https://blog.cf.avmtn.net/coding/golang/DigitalRoot/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="../fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #D19826;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #D19826 50%
    );
  }
  blockquote {
    border-left: 8px solid #D19826;
  }
  .nanobar .bar {
    background: #D19826;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #D19826;
    border-color: #D19826;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #D19826;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      Avimitin&#39;s Blog
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">Home</a>
        
          
          <a href="/friends" class="ml">Friends</a>
          
        
        
          
            <a href="mailto:avimitin@gmail.com" target="_blank" class="ml">Email</a>
          
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
          <h1 class="post-title">Solving Digital Roots</h1>


	<p class="post-tldr">
		<span id="tldr-start">TL;DR:</span> using TDD to solve the digital roots problem
	</p>



	<img src="https://cdn.jsdelivr.net/gh/Avimitin/PicStorage/pic/20200810211539.png"/>



	<p class="post-tn-alt">random photo</p>


  <h1 id="Sum-of-Digits-Digital-Root"><a href="#Sum-of-Digits-Digital-Root" class="headerlink" title="Sum of Digits / Digital Root"></a>Sum of Digits / Digital Root</h1><h2 id="Detail"><a href="#Detail" class="headerlink" title="Detail"></a>Detail</h2><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Digital_root">Digital root</a> is the <em>recursive sum of all the digits in a number.</em></p>
<p>Given <code>n</code>, take the sum of the digits of <code>n</code>.  If that value has more than one digit, continue reducing in this way  until a single-digit number is produced. The input will be a non-negative integer.</p>
<p>For example:</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">    16  --&gt;  1 + 6 &#x3D; 7
   942  --&gt;  9 + 4 + 2 &#x3D; 15  --&gt;  1 + 5 &#x3D; 6
132189  --&gt;  1 + 3 + 2 + 1 + 8 + 9 &#x3D; 24  --&gt;  2 + 4 &#x3D; 6
493193  --&gt;  4 + 9 + 3 + 1 + 9 + 3 &#x3D; 29  --&gt;  2 + 9 &#x3D; 11  --&gt;  1 + 1 &#x3D; 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Ideas"><a href="#Ideas" class="headerlink" title="Ideas"></a>Ideas</h2><p>é¦–å…ˆåŸºäºåˆ†æ²»æ€æƒ³ï¼ŒæŠŠè¿™ä¸ªé—®é¢˜åˆ†æˆå‡ ä¸ªå°çš„éƒ¨åˆ†ï¼š</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">åˆ†ç¦»å„æ•°ä½ä¸Šçš„æ•°å­— -&gt; æ±‚å’Œ -&gt; æ£€æŸ¥æ˜¯å¦ä¸ä¸ºå•ä½æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>é¦–å…ˆç»†åˆ†ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼šåˆ†ç¦»æ•°å­—ã€‚æˆ‘çš„æ€è·¯æ˜¯æŠŠæ¯ä¸ªæ•°ä½ä¸Šçš„ç¬¬ä¸€ä¸ªæ•°å­—ç»™æŠ½å–å‡ºæ¥ï¼Œæ”¾è¿›ä¸€ä¸ªæ•°ç»„é‡Œï¼Œç„¶åå°†å…¶å‡å°‘ä¸ºå‰©ä¸‹çš„æ•°ä½ï¼Œç»§ç»­è¿™æ ·çš„å¾ªç¯ç›´åˆ°æ•°å­—é™åˆ°æœ€ä½ä¸€ä½ã€‚æ¯”å¦‚å¯¹äºæ•°å­— 114514ï¼Œå…ˆå» 1 å¡è¿›æ•°ç»„ï¼Œç„¶åä»¤æ•°å­—ç­‰äº 14514ï¼Œç»§ç»­éå†ã€‚</p>
<p>æ ¹æ®ä»¥ä¸Šæ€è·¯ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡å¯ä»¥ç»†åˆ†ä¸ºï¼šæŠ½å–é¦–ä½ï¼Œå¡å…¥æ•°ç»„ï¼Œå‡å°‘æ•°å­—å¤§å°ã€‚</p>
<h2 id="æŠ½å–é¦–ä½"><a href="#æŠ½å–é¦–ä½" class="headerlink" title="æŠ½å–é¦–ä½"></a>æŠ½å–é¦–ä½</h2><h3 id="Test-first"><a href="#Test-first" class="headerlink" title="Test first"></a>Test first</h3><p>åŸºäº TDD çš„æ€æƒ³ï¼Œæˆ‘å…ˆå†™æµ‹è¯• <code>TestGetBit</code> , æµ‹è¯•å¯¹äºæ•°å­— 16 èƒ½ä¸èƒ½æ­£ç¡®å–å¾—é¦–ä½ 1:</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestGetDigit</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get 16"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">1</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¿è¡Œä¸€ä¸‹æµ‹è¯•ï¼š</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">.&#x2F;DigitalRoot_test.go: undefined: getDigit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="Then-code"><a href="#Then-code" class="headerlink" title="Then code"></a>Then code</h3><p>ç„¶åå†æ¥å†™å‡½æ•° <code>getDigit</code> ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">getDigit</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>å†æ¥è·‘ä¸€æ¬¡æµ‹è¯•ï¼Œæµ‹è¯•åº”è¯¥èƒ½å¤Ÿé€šè¿‡äº†ã€‚äºæ˜¯æˆ‘ä»¬å†å†™åé¢çš„æµ‹è¯•ï¼Œå¯¹äºè¾“å…¥ 6 èƒ½ä¸èƒ½è·å¾—é¦–ä½ 6ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go">t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get 6"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">6</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶åé‡æ–°è·‘æµ‹è¯•ï¼Œç»“æœè‡ªç„¶ä¼šé”™è¯¯ï¼š</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">.&#x2F;DigitalRoot_test.go: got 1 want 6<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="Refactor"><a href="#Refactor" class="headerlink" title="Refactor"></a>Refactor</h3><p>ç„¶åè¦å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼šæƒ³è¦å¯¹ä»»ä½•æ•°å­—éƒ½èƒ½å–å¾—ç¬¬ä¸€ä½ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠä»–å’Œ10çš„å¹‚è¿ç®—åçš„ç»“æœç›¸é™¤å³å¯ï¼Œæ¯”å¦‚å¯¹äºæ•° <code>1,919,810</code>ï¼Œå¯ä»¥å°†å…¶é™¤ä»¥ 10 çš„ 6 æ¬¡æ–¹ï¼Œä¹Ÿå°±æ˜¯ <code>1,000,000</code> å¹¶èˆå¼ƒä½™æ•°å°±èƒ½è·å¾—ç»“æœ 1 ã€‚æ‰€ä»¥åœ¨é‡æ„ <code>getDigit</code> å‰ï¼Œéœ€è¦å…ˆå†™ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œå¯¹ 10 çš„å¹‚è¿ç®—ã€‚</p>
<h2 id="å¹‚è¿ç®—"><a href="#å¹‚è¿ç®—" class="headerlink" title="å¹‚è¿ç®—"></a>å¹‚è¿ç®—</h2><h3 id="Test-first-1"><a href="#Test-first-1" class="headerlink" title="Test first"></a>Test first</h3><p>å…ˆå†™æµ‹è¯• <code>TestPow</code>:</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestPow</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	got <span class="token operator">:=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
	want <span class="token operator">:=</span> <span class="token number">1000000</span>
	<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
		t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è·‘ä¸€ä¸‹æµ‹è¯•ï¼š</p>
<pre class="line-numbers language-test" data-language="test"><code class="language-test">.&#x2F;DigitalRoot_test.go: undefined: pow<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="Then-code-1"><a href="#Then-code-1" class="headerlink" title="Then code"></a>Then code</h3><p>ç„¶åå†™å‡½æ•°</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">pow</span><span class="token punctuation">(</span>p <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> pow <span class="token operator">=</span> <span class="token number">10</span>
	<span class="token keyword">if</span> p <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token number">1</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">for</span> p <span class="token operator">></span> <span class="token number">1</span> <span class="token punctuation">&#123;</span>
		pow <span class="token operator">*=</span> <span class="token number">10</span>
		p<span class="token operator">--</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> pow
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å½“ <code>p = 0</code> ä¹Ÿå°±æ˜¯åçš„ 0 æ¬¡æ–¹æ—¶ï¼Œæˆ‘ä»¬è¿”å› 1ã€‚å¦‚æœè¾“å…¥æ˜¯æ­£çš„ï¼Œæˆ‘ä»¬ä¸æ–­å°† pow å˜é‡å’Œ 10 ç›¸ä¹˜å¹¶é€’å‡è¾“å…¥ã€‚ç”±äºé¢˜å¹²ç»™å‡ºï¼Œè¾“å…¥ä¸€å®šæ˜¯æ­£æ•´æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘ <code>p&lt;0</code> çš„æƒ…å†µã€‚</p>
<h3 id="Refactor-1"><a href="#Refactor-1" class="headerlink" title="Refactor"></a>Refactor</h3><p>ç„¶åå¯¹å‡½æ•° <code>getDigit</code> è¿›è¡Œé‡æ„ï¼Œå¤šè¾“å…¥ä¸€ä¸ª e æ¥è·å¾—è¿™ä¸ªæ•°æœ‰å‡ ä½ï¼Œä¸”å› ä¸ºå¯¹äº 7 ä½çš„æ•°å­—æˆ‘ä»¬åªéœ€è¦æ±‚ 10 çš„ 6 å€å³å¯ï¼Œå› æ­¤è¦å…ˆæŠŠ <code>e -= 1</code>ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">getDigit</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> e <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	e <span class="token operator">-=</span> <span class="token number">1</span>
	pow <span class="token operator">:=</span> <span class="token function">pow</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
	<span class="token keyword">return</span> n <span class="token operator">/</span> pow
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åŒæ—¶å¯¹æµ‹è¯•è¿›è¡Œå®Œæ•´ä¿®æ”¹è¡¥å……ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestGetDigit</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get 16"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">1</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get 114514"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span><span class="token number">114514</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">1</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get 6"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">6</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶åè·‘ä¸€ä¸‹æµ‹è¯•ï¼Œæµ‹è¯•å°±åº”è¯¥æ˜¯èƒ½é€šè¿‡çš„äº†ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±éœ€è¦çŸ¥é“æ¯ä¸ªè¾“å…¥éƒ½æœ‰å¤šå°‘ä½ï¼Œæ‰€ä»¥éœ€è¦å†™ä¸€ä¸ª <code>count</code> å‡½æ•°æ¥è·å¾—æ•°ä½ã€‚</p>
<h2 id="è®¡ç®—æ•°ä½"><a href="#è®¡ç®—æ•°ä½" class="headerlink" title="è®¡ç®—æ•°ä½"></a>è®¡ç®—æ•°ä½</h2><h3 id="Test-first-2"><a href="#Test-first-2" class="headerlink" title="Test first"></a>Test first</h3><p>äºŒè¯ä¸è¯´ï¼Œå…ˆå†™æµ‹è¯•ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestCount</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	got <span class="token operator">:=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">114514</span><span class="token punctuation">)</span>
	want <span class="token operator">:=</span> <span class="token number">6</span>
	<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
		t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Then-code-2"><a href="#Then-code-2" class="headerlink" title="Then code"></a>Then code</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">count</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> digitCount <span class="token builtin">int</span>
	<span class="token keyword">for</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">/=</span> <span class="token number">10</span>
		digitCount<span class="token operator">++</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> digitCount
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸æ–­ä»¤ n é€€ 1 ä½ç›´åˆ°å…¶ä¸ä¸ºæ­£æ•´æ•°ï¼Œå¹¶åœ¨æ¯æ¬¡éå†æ—¶é€’å¢å˜é‡ <code>digitCount</code> å°±èƒ½è·å¾—æ•°å­—çš„ä½æ•°ã€‚</p>
<h3 id="Refactor-2"><a href="#Refactor-2" class="headerlink" title="Refactor"></a>Refactor</h3><p>åŠ ä¸ªæ³¨é‡Šï¼Ÿ</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// count return the number of input n</span>
<span class="token keyword">func</span> <span class="token function">count</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> digitCount <span class="token builtin">int</span>
	<span class="token keyword">for</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">/=</span> <span class="token number">10</span>
		digitCount<span class="token operator">++</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> digitCount
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="è·å¾—ä½™æ•°"><a href="#è·å¾—ä½™æ•°" class="headerlink" title="è·å¾—ä½™æ•°"></a>è·å¾—ä½™æ•°</h2><h3 id="Test-first-3"><a href="#Test-first-3" class="headerlink" title="Test first"></a>Test first</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestGetPart</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get part 114514"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getPart</span><span class="token punctuation">(</span><span class="token number">114514</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">14514</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Then-code-3"><a href="#Then-code-3" class="headerlink" title="Then code"></a>Then code</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">getPart</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token number">14514</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="Refactor-3"><a href="#Refactor-3" class="headerlink" title="Refactor"></a>Refactor</h3><p>é‡æ–°å†™æµ‹è¯•ï¼Œè®©åŸæ–¹æ³•å¤±è´¥</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestGetPart</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get part 114514"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getPart</span><span class="token punctuation">(</span><span class="token number">114514</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">14514</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get part 16"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">getPart</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">6</span>
		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¯¹äºä»»ä½•æ­£æ•´æ•°è¾“å…¥ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œå–ä½™æ“ä½œæ¥è·å¾—ä»–é™¤é¦–ä½ä»¥å¤–çš„æ•°ä½ã€‚æ¯”å¦‚å¯¹äºè¾“å…¥ <code>1,919,810</code>ï¼Œå¯ä»¥å¯¹å…¶é™¤ä»¥ <code>1,000,000</code> ï¼Œä½™æ•° <code>919,810</code> å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å€¼ã€‚</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">getPart</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> bit <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> n <span class="token operator">%</span> <span class="token function">pow</span><span class="token punctuation">(</span>bit<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="æ’å…¥æ•°ç»„"><a href="#æ’å…¥æ•°ç»„" class="headerlink" title="æ’å…¥æ•°ç»„"></a>æ’å…¥æ•°ç»„</h2><p>ç„¶åæˆ‘ä»¬æŠŠè¿™äº›æ•°åˆ†åˆ«æ’å…¥æ•°ç»„ï¼Œè¿˜æ˜¯å…ˆå†™æµ‹è¯•ï¼š</p>
<h3 id="Test-first-4"><a href="#Test-first-4" class="headerlink" title="Test first"></a>Test first</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestInsertDigit</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get 16"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">insertDigit</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">&#125;</span>
		<span class="token keyword">if</span> <span class="token operator">!</span>reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>got<span class="token punctuation">,</span> want<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %v want %v"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"get 114514"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">insertDigit</span><span class="token punctuation">(</span><span class="token number">114514</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span>
		<span class="token keyword">if</span> <span class="token operator">!</span>reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>got<span class="token punctuation">,</span> want<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %v want %v"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¿è¡Œä¸Šé¢çš„æµ‹è¯•ï¼Œä½¿ç”¨ <code>reflect</code> åŒ…çš„ <code>DeepEqual</code> å‡½æ•°æ¥æ£€æŸ¥è¾“å‡ºæ•°ç»„æ˜¯å¦æ—¶æˆ‘ä»¬æƒ³è¦çš„ã€‚</p>
<h3 id="Then-code-4"><a href="#Then-code-4" class="headerlink" title="Then code"></a>Then code</h3><p>å…ˆåˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæˆ‘ä»¬åˆ©ç”¨ä¸Šé¢å†™å¥½çš„å‡½æ•°ï¼ŒæŠ½å–é¦–ä½æ’å…¥æ•°ç»„ï¼Œå°†ä½™æ•°èµ‹å€¼ nï¼Œå¾ªç¯è‡³ä½æ•°é™è‡³ 0ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">insertDigit</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> amount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> digits <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	<span class="token keyword">for</span> amount <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>
		i <span class="token operator">:=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> amount<span class="token punctuation">)</span>
		n <span class="token operator">=</span> <span class="token function">getPart</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> amount<span class="token punctuation">)</span>
		amount<span class="token operator">--</span>
		digits <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>digits<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> digits
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Refactor-4"><a href="#Refactor-4" class="headerlink" title="Refactor"></a>Refactor</h3><p>å› ä¸ºæ¯æ¬¡ <code>getDigit</code> å’Œ <code>getPart</code> éƒ½éœ€è¦å¾ªç¯è¿›è¡Œä¸€æ¬¡ 10 çš„å¹‚è¿ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡æ„ä¸€ä¸‹æ¯”è¾ƒå ç”¨æ—¶é—´çš„è¿™ä¸€éƒ¨åˆ†ï¼ŒæŠŠåŸæœ¬å„å‡½æ•°çš„è®¡ç®—æå–å‡ºæ¥åªè®¡ç®—ä¸€æ¬¡ï¼Œå¹¶æŠŠè¿™ä¸¤ä¸ªå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ”¹ä¸ºä¼ å…¥ 10 å¹‚è¿ç®—åçš„å€¼ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">insertDigit</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> amount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> digits <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
    divisor <span class="token operator">:=</span> <span class="token function">pow</span><span class="token punctuation">(</span>amount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> amount <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>
		i <span class="token operator">:=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> divisor<span class="token punctuation">)</span>
		n <span class="token operator">=</span> <span class="token function">getPart</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> divisor<span class="token punctuation">)</span>
		amount<span class="token operator">--</span>
		digits <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>digits<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> digits
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h2><h3 id="Test-first-5"><a href="#Test-first-5" class="headerlink" title="Test first"></a>Test first</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestDigitRoot</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"test 16"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		got <span class="token operator">:=</span> <span class="token function">DigitalRoot</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
		want <span class="token operator">:=</span> <span class="token number">7</span>

		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Then-code-5"><a href="#Then-code-5" class="headerlink" title="Then code"></a>Then code</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ£€æµ‹è¾“å…¥æœ‰å‡ ä½ï¼Œç„¶åä¼ åˆ° <code>insertDigit</code> å‡½æ•°é‡Œæ¥è·å¾—æ¯ä¸€ä½çš„å€¼ï¼Œæœ€åå†éå†æ±‚å€¼ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">DigitalRoot</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
    cm <span class="token operator">:=</span> <span class="token function">countNum</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	digits <span class="token operator">:=</span> <span class="token function">insertDigit</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cm<span class="token punctuation">)</span>
	n <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>digits<span class="token punctuation">)</span>
	<span class="token keyword">return</span> n
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Refactor-5"><a href="#Refactor-5" class="headerlink" title="Refactor"></a>Refactor</h3><p>ç„¶ååŠ å…¥æ›´å¤šæµ‹è¯•ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go">t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"942"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	got <span class="token operator">:=</span> <span class="token function">DigitalRoot</span><span class="token punctuation">(</span><span class="token number">942</span><span class="token punctuation">)</span>
	want <span class="token operator">:=</span> <span class="token number">6</span>

	<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
		t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"132189"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	got <span class="token operator">:=</span> <span class="token function">DigitalRoot</span><span class="token punctuation">(</span><span class="token number">132189</span><span class="token punctuation">)</span>
	want <span class="token operator">:=</span> <span class="token number">6</span>

	<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">&#123;</span>
		t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %d want %d"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ¯«ä¸æ„å¤–ï¼Œè¿™ä¸ªæµ‹è¯•ä¸€å®šä¼š failedï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æŠŠæ±‚å’Œå®Œçš„å€¼ç»§ç»­åˆ†å¼€è®¡ç®—ï¼Œæ‰€ä»¥ç»§ç»­é‡æ„ï¼š</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">DigitalRoot</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">for</span> cm <span class="token operator">:=</span> <span class="token function">countNum</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> cm <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span> cm <span class="token operator">=</span> <span class="token function">countNum</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		digits <span class="token operator">:=</span> <span class="token function">insertDigit</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cm<span class="token punctuation">)</span>
		n <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>digits<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> n
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æŠŠè¾“å…¥è¿›è¡Œæ•°ä½è®¡ç®—ï¼Œåªè¦è¾“å…¥å¤§äº1å°±åˆ†ç¦»æ±‚å’Œï¼Œå¹¶æŠŠæ±‚å’Œç»“æœé‡æ–°èµ‹å€¼å›å˜é‡ nï¼Œç›´åˆ° n çš„æ•°ä½é™è‡³ 1ï¼Œè¿”å›ç»“æœã€‚</p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åŸºäº TDD å†™ç®—æ³•é¢˜ï¼Œå‡ºä¹æ„æ–™çš„æ˜¯ï¼ŒTDD ä¸ä»…æ²¡æœ‰é™ä½å†™é¢˜é€Ÿåº¦ï¼Œç”šè‡³å¸®åŠ©æˆ‘é¿å…äº†å¤§é‡ç®€å•é”™è¯¯ï¼Œè€Œä¸”åŸºäº TDDï¼Œæˆ‘ä¹Ÿä¸éœ€è¦æ¶ä¸Š â€œBREAK POINTS MACHINE GUNâ€ åœ¨ IDE æ‰“ä¸Šå¯†å¯†éº»éº»çš„çº¢ç‚¹æ¥åˆ¤æ–­é€»è¾‘é”™è¯¯ï¼ŒTDD å¸®åŠ©äº†æˆ‘å¾ˆå¤šï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« æˆ‘ä¹ŸåŸºäº TDD çš„å†™æ³•ï¼Œå¸Œæœ›èƒ½å¸¦æ›´å¤šäººå…¥å‘ã€‚</p>


  <p><a class="classtest-link" href="/tags/algorithm/" rel="tag">algorithm</a>, <a class="classtest-link" href="/tags/coding/" rel="tag">coding</a>, <a class="classtest-link" href="/tags/golang/" rel="tag">golang</a> â€” Feb 13, 2021</p>
  


          <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with â¤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
        at <a href="https://en.wikipedia.org/wiki/Earth" target="_blank" rel="noreferrer">Earth</a>.</p>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/avimitin" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      

      

      

    </div>
  
</div>

        </div>
      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>
  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>
